schema: '2.0'
stages:
  prepare:
    cmd: python -m src.salary.prepare --test-size 0.3 --seed 42
    deps:
    - path: data/raw/advanced_plus_totals
      hash: md5
      md5: 97f2c483556f6f4d761b6ebd769294f4.dir
      size: 2902566
      nfiles: 13
    - path: src/salary/consts.py
      hash: md5
      md5: b67955c74945670a11c7e6d8ca3527d2
      size: 853
    - path: src/salary/prepare.py
      hash: md5
      md5: 95682eb7e98f6c2a4c0730fc4b5b19c0
      size: 1767
    - path: src/salary/utils.py
      hash: md5
      md5: 6952769a0ebff51896903275b40134a3
      size: 3961
    params:
      src/salary/params.py:
        Base.seed: 42
        Preprocessing.test_size: 0.3
    outs:
    - path: data/interim/salary/
      hash: md5
      md5: 2bce899794e96e665743c1e98a981a9d.dir
      size: 912389
      nfiles: 2
  featurize:
    cmd: python -m src.salary.featurize --target SalaryAdj
    deps:
    - path: data/interim/salary
      hash: md5
      md5: 2bce899794e96e665743c1e98a981a9d.dir
      size: 912389
      nfiles: 2
    - path: src/salary/consts.py
      hash: md5
      md5: b67955c74945670a11c7e6d8ca3527d2
      size: 853
    - path: src/salary/featurize.py
      hash: md5
      md5: 178c9582e646bf9fab58ac3daf7acbd2
      size: 2375
    - path: src/salary/params.py
      hash: md5
      md5: f8e365af2af2a043c962f206b946649a
      size: 939
    - path: src/salary/utils.py
      hash: md5
      md5: 6952769a0ebff51896903275b40134a3
      size: 3961
    params:
      src/salary/params.py:
        Base.target: SalaryAdj
    outs:
    - path: dags/salary/preprocessor.pkl
      hash: md5
      md5: 3bdfcc6bb64e09ad938164ff6e8f64ae
      size: 5220
    - path: data/processed/salary/
      hash: md5
      md5: 48e3b4bc486e6781bfa51588f2d19506.dir
      size: 3005070
      nfiles: 2
  train:
    cmd: python -m src.salary.train catboost --target SalaryAdj --seed 42 --metric-name
      r2 --valid-size 0.25 --early-stopping-rounds 100 --n-trials 3 --timeout 1000
    deps:
    - path: data/processed/salary
      hash: md5
      md5: 48e3b4bc486e6781bfa51588f2d19506.dir
      size: 3005070
      nfiles: 2
    - path: src/salary/consts.py
      hash: md5
      md5: b67955c74945670a11c7e6d8ca3527d2
      size: 853
    - path: src/salary/train.py
      hash: md5
      md5: c680d1b13a33e3b995b97369be5fb0da
      size: 4683
    - path: src/salary/utils.py
      hash: md5
      md5: 6952769a0ebff51896903275b40134a3
      size: 3961
    params:
      src/salary/params.py:
        Base.seed: 42
        Base.target: SalaryAdj
        Catboost.early_stopping_rounds: 100
        Catboost.metric_name: r2
        Catboost.n_trials: 3
        Catboost.timeout: 1000
        Catboost.valid_size: 0.25
    outs:
    - path: models/salary/catboost.cbm
      hash: md5
      md5: 4e1b976b2844f73646feaac6dd0ddc02
      size: 2150136
  evaluate:
    cmd: python -m src.salary.evaluate catboost --target SalaryAdj
    deps:
    - path: data/processed/salary/
      hash: md5
      md5: 48e3b4bc486e6781bfa51588f2d19506.dir
      size: 3005070
      nfiles: 2
    - path: models/salary/catboost.cbm
      hash: md5
      md5: 4e1b976b2844f73646feaac6dd0ddc02
      size: 2150136
    - path: src/salary/consts.py
      hash: md5
      md5: b67955c74945670a11c7e6d8ca3527d2
      size: 853
    - path: src/salary/evaluate.py
      hash: md5
      md5: e17a5bb5301387d0736b981ab3e67e97
      size: 1020
    - path: src/salary/utils.py
      hash: md5
      md5: 6952769a0ebff51896903275b40134a3
      size: 3961
    params:
      src/salary/params.py:
        Base.target: SalaryAdj
    outs:
    - path: dags/salary/catboost/metrics.json
      hash: md5
      md5: 0575bb51f7c1aa4a4dd0c7c43942e3d5
      size: 51
  make_onnx:
    cmd: python -m src.salary.make_onnx catboost --target SalaryAdj
    deps:
    - path: dags/salary/preprocessor.pkl
      hash: md5
      md5: 3bdfcc6bb64e09ad938164ff6e8f64ae
      size: 5220
    - path: data/interim/salary/
      hash: md5
      md5: 2bce899794e96e665743c1e98a981a9d.dir
      size: 912389
      nfiles: 2
    - path: models/salary/catboost.cbm
      hash: md5
      md5: 4e1b976b2844f73646feaac6dd0ddc02
      size: 2150136
    - path: src/salary/consts.py
      hash: md5
      md5: b67955c74945670a11c7e6d8ca3527d2
      size: 853
    - path: src/salary/make_onnx.py
      hash: md5
      md5: 44b010020e7f6b16dfa970be3d2503ca
      size: 2726
    - path: src/salary/utils.py
      hash: md5
      md5: 6952769a0ebff51896903275b40134a3
      size: 3961
    params:
      src/salary/params.py:
        Base.target: SalaryAdj
    outs:
    - path: models/salary/catboost.onnx
      hash: md5
      md5: 4706af28a4eea8ac8002d058007e6422
      size: 10254148
